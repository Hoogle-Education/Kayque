# variaveis de configuracao
CC := g++
FLAGS :=-Wall -Wextra -std=c++11
INCLUDE_DIR :=include
SRC_DIR :=src
BUILD_DIR :=build

# nome do executavel
EXEC := vpl_execution

# arquivos fonte e destino
SRC_FILES := $(wildcard $(SRC_DIR/entidades/*.cpp) $(SRC_DIR/main.cpp))
OBJ_FILES := $(patsubst $(SRC_DIR)/%.cpp,$(BUILD_DIR)/%.o,$(SRC_FILES))
OBJECTS = $(BUILD_DIR)/*.o

# regra de compilacao
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.cpp
	$(CC) $(FLAGS) -I$(INCLUDE_DIR) -c $< -o $@

$(TARGET) : $(OBJECTS)
	$(CC)  $(OBJECTS) -o $(TARGET)

# regra de execucao
$(EXEC) : $(OBJ_FILES)
	$(CC) $(FLAGS) $^ -o $@

# comando de teste
test:
	echo a

# comando de execucao
.PHONY: run
run: $(EXEC)
	./$(EXEC)

# comando de limpeza
.PHONY: clean
clean:
	rm -f $(BUILD_DIR)/*.o $(EXEC) $(TARGET)